---
import { getCollection, render } from 'astro:content';
import Project from './Project.svelte';

interface Props {
  lang: 'en' | 'el';
}

const { lang }: Props = Astro.props;
const collectionName = (lang + 'Projects') as 'enProjects' | 'elProjects';

const projects = await getCollection(collectionName);
const renderedProjects = await Promise.all(projects.map(p => render(p)));
---

<h2 class="md:text-4xl text-3xl">Projects</h2>
<div id="projects" class="grid gap-6 md:grid-cols-2 lg:grid-cols-3 p-6">
  {
    renderedProjects.map(({ remarkPluginFrontmatter, Content }) => {
      return (
        <Project
          client:visible
          title={remarkPluginFrontmatter.title}
          tech={remarkPluginFrontmatter.tech}
        >
          <Content />
        </Project>
      );
    })
  }
</div>
